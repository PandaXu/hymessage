# 真实短信导入功能说明

## ⚠️ iOS 系统限制

**重要说明**：由于 iOS 系统的安全限制，应用**无法直接读取**设备上的短信数据库。这是 Apple 的安全策略，所有第三方应用都无法绕过。

## ✅ 解决方案：文件导入功能

我们提供了**文件导入功能**，支持从导出的文件中导入真实短信数据。

## 📱 使用方法

### 步骤 1: 导出短信数据

使用以下工具之一导出短信：

#### 方法一：使用第三方工具（推荐）

1. **iMazing** (Mac/Windows)
   - 下载：https://imazing.com
   - 连接 iPhone
   - 导出短信为 CSV 或 JSON 格式

2. **iExplorer** (Mac/Windows)
   - 下载：https://macroplant.com/iexplorer
   - 连接 iPhone
   - 导出短信数据

3. **3uTools** (Windows/Mac)
   - 下载：https://www.3u.com
   - 连接 iPhone
   - 导出短信

#### 方法二：从 iCloud 备份导出

1. 使用 iCloud 备份工具
2. 提取短信数据库
3. 转换为 CSV 或 JSON 格式

#### 方法三：手动创建文件

按照应用中的格式模板手动创建 CSV 或 JSON 文件。

### 步骤 2: 导入到应用

1. **打开应用**
   - 进入"设置"标签
   - 点击"导入短信"

2. **选择文件格式**
   - CSV 格式（推荐）
   - JSON 格式

3. **选择文件**
   - 点击"选择文件导入"
   - 从文件应用中选择导出的文件

4. **等待导入完成**
   - 应用会自动解析文件
   - 提取签名和分类
   - 显示导入的短信

## 📋 文件格式要求

### CSV 格式

```csv
sender,content,timestamp
10086,【中国移动】您的验证码是123456，5分钟内有效，请勿泄露。,2024-01-01 12:00:00
95588,【工商银行】您尾号1234的银行卡于12:30消费100.00元，余额5000.00元。,2024-01-01 13:30:00
```

**字段说明**：
- `sender`: 发件人号码或名称
- `content`: 短信内容
- `timestamp`: 时间戳（格式：yyyy-MM-dd HH:mm:ss）

### JSON 格式

```json
{
  "messages": [
    {
      "sender": "10086",
      "content": "【中国移动】您的验证码是123456，5分钟内有效，请勿泄露。",
      "timestamp": "2024-01-01T12:00:00Z"
    },
    {
      "sender": "95588",
      "content": "【工商银行】您尾号1234的银行卡于12:30消费100.00元，余额5000.00元。",
      "timestamp": "2024-01-01T13:30:00Z"
    }
  ]
}
```

**字段说明**：
- `sender`: 发件人号码或名称
- `content`: 短信内容
- `timestamp`: ISO8601 格式的时间戳

## 🔧 功能特点

### 自动处理
- ✅ 自动提取短信签名
- ✅ 自动进行 AI 分类
- ✅ 自动保存到本地存储
- ✅ 下次打开自动加载

### 数据持久化
- ✅ 导入的短信会保存到本地
- ✅ 应用重启后自动加载
- ✅ 支持多次导入（会合并数据）

### 格式支持
- ✅ CSV 格式（逗号分隔值）
- ✅ JSON 格式（JavaScript 对象表示法）
- ✅ 自动识别文件格式

## 💡 使用技巧

### 1. 批量导入
- 可以多次导入不同文件
- 数据会自动合并
- 重复的短信（相同 ID）会被去重

### 2. 数据更新
- 导入新数据后，点击"刷新短信"更新显示
- 或重新打开应用

### 3. 查看格式模板
- 在导入界面点击"查看格式模板"
- 可以复制模板内容
- 参考模板创建自己的文件

## ⚠️ 注意事项

1. **文件编码**
   - CSV 文件必须使用 UTF-8 编码
   - JSON 文件必须使用 UTF-8 编码

2. **时间格式**
   - CSV: `yyyy-MM-dd HH:mm:ss`
   - JSON: ISO8601 格式（如 `2024-01-01T12:00:00Z`）

3. **数据量**
   - 建议单次导入不超过 10000 条短信
   - 大量数据可能需要较长时间处理

4. **隐私安全**
   - 所有数据仅在本地处理
   - 不会上传到任何服务器
   - 可以随时删除导入的数据

## 🚀 快速开始

1. 使用 iMazing 或其他工具导出短信为 CSV 格式
2. 将文件保存到 iPhone（通过 AirDrop、邮件等）
3. 打开应用 → 设置 → 导入短信
4. 选择 CSV 格式 → 选择文件
5. 等待导入完成

## 📝 示例：从 iMazing 导出

1. 打开 iMazing
2. 连接 iPhone
3. 选择"消息"
4. 点击"导出"
5. 选择"CSV"格式
6. 保存文件
7. 通过 AirDrop 发送到 iPhone
8. 在应用中导入

---

**现在可以通过文件导入功能使用真实短信数据了！** 🎉

