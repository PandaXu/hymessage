# 批量选择和删除功能说明

## ✅ 新增功能

在"按签名分类"和"AI分类"界面中，已添加以下功能：

### 1. 编辑模式
- 点击右上角"编辑"按钮进入编辑模式
- 在编辑模式下可以批量选择短信

### 2. 批量选择
- **单选**：点击短信左侧的圆圈进行选择
- **全选**：点击工具栏中的"全选"按钮
- **取消选择**：再次点击已选中的短信

### 3. 批量删除
- **删除选中**：选择短信后，点击"删除(N)"按钮（N为选中数量）
- **删除整个签名/分类**：在编辑模式下，点击分组标题右侧的垃圾桶图标
- **全部删除**：点击工具栏中的"全部删除"按钮

### 4. 安全确认
- 所有删除操作都会弹出确认对话框
- 防止误删操作

## 📱 使用方法

### 按签名分类界面

1. **进入编辑模式**
   - 点击右上角"编辑"按钮

2. **选择短信**
   - 点击短信左侧圆圈进行选择
   - 或点击"全选"选择所有短信

3. **删除操作**
   - **删除选中**：点击"删除(N)"按钮
   - **删除整个签名**：点击签名标题右侧的垃圾桶图标
   - **全部删除**：点击"全部删除"按钮

4. **退出编辑模式**
   - 点击"取消"按钮
   - 或删除所有短信后自动退出

### AI分类界面

使用方法与"按签名分类"相同：

1. 点击"编辑"进入编辑模式
2. 选择要删除的短信
3. 执行删除操作
4. 点击"取消"退出编辑模式

## 🎯 功能特点

### 批量选择
- ✅ 支持单选和多选
- ✅ 显示选中数量
- ✅ 全选功能
- ✅ 取消选择功能

### 删除功能
- ✅ 删除单个短信
- ✅ 批量删除选中短信
- ✅ 删除整个签名/分类的所有短信
- ✅ 全部删除功能
- ✅ 删除确认对话框

### 用户体验
- ✅ 编辑模式切换流畅
- ✅ 选中状态清晰可见
- ✅ 删除操作有确认提示
- ✅ 删除后自动更新界面

## 🔧 技术实现

### MessageManager 新增方法

```swift
// 删除单个短信
func deleteMessage(_ messageId: String)

// 批量删除短信
func deleteMessages(_ messageIds: [String])

// 删除指定签名的所有短信
func deleteMessagesBySignature(_ signature: String)

// 删除指定分类的所有短信
func deleteMessagesByCategory(_ category: MessageCategory)

// 删除所有短信
func deleteAllMessages()
```

### 视图状态管理

- `selectedMessages: Set<String>` - 存储选中的短信ID
- `isEditMode: EditMode` - 编辑模式状态
- `showDeleteAlert: Bool` - 删除确认对话框显示状态
- `deleteTarget` - 删除目标（签名或分类）

## ⚠️ 注意事项

1. **删除操作不可撤销**
   - 删除前会弹出确认对话框
   - 请谨慎操作

2. **编辑模式**
   - 在编辑模式下，点击短信不会跳转到详情页
   - 需要退出编辑模式才能查看详情

3. **空列表处理**
   - 删除所有短信后，界面会显示"暂无短信"
   - 编辑模式会自动退出

## 🚀 使用示例

### 示例 1: 删除单个签名下的所有短信

1. 进入"按签名分类"界面
2. 点击"编辑"
3. 找到要删除的签名（如"中国移动"）
4. 点击签名标题右侧的垃圾桶图标
5. 确认删除

### 示例 2: 批量删除多条短信

1. 进入"AI分类"界面
2. 点击"编辑"
3. 选择要删除的短信（点击左侧圆圈）
4. 点击"删除(N)"按钮（N为选中数量）
5. 确认删除

### 示例 3: 删除所有短信

1. 进入任意分类界面
2. 点击"编辑"
3. 点击"全部删除"
4. 确认删除

---

**功能已实现，现在可以在"按签名分类"和"AI分类"界面中使用批量选择和删除功能了！** 🎉

