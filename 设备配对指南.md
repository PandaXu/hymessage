# Xcode 设备配对完整指南

## 🔍 问题说明

**错误提示**: "Pair with the device in the Xcode Devices Window, and respond to any pairing prompts on the device."

这表示 Xcode 需要与你的 iOS 设备建立信任关系。

## 🚀 解决步骤

### 方法一：通过 Xcode Devices Window（推荐）

1. **打开 Devices Window**
   - 在 Xcode 菜单栏：**Window → Devices and Simulators**
   - 或按快捷键：`⇧⌘2` (Shift + Command + 2)

2. **连接设备**
   - 用 USB 线连接 iPhone/iPad 到 Mac
   - 确保设备已解锁

3. **等待设备显示**
   - 在左侧设备列表中，你的设备应该会出现
   - 如果显示 "Preparing device..."，等待完成

4. **配对设备**
   - 点击你的设备名称
   - 如果显示 "Use for Development"，点击它
   - 或点击 "Trust" 按钮

5. **在设备上确认**
   - 设备上会弹出提示："要信任此电脑吗？"
   - 点击 **"信任"**
   - 输入设备密码确认

6. **等待配对完成**
   - Xcode 会显示配对进度
   - 完成后设备状态会变为 "Connected"

### 方法二：通过设备设置

1. **在设备上操作**
   - 设置 → 通用 → VPN与设备管理（或"描述文件与设备管理"）
   - 找到你的 Mac 名称
   - 点击并选择"信任"

2. **重新连接**
   - 重新插拔 USB 线
   - 在 Xcode 中刷新设备列表

## 📋 详细步骤（图文说明）

### 步骤 1: 打开 Devices Window

```
Xcode 菜单栏
  ↓
Window
  ↓
Devices and Simulators
  ↓
或按 ⇧⌘2
```

### 步骤 2: 查看设备状态

在 Devices Window 中，你会看到：

```
左侧设备列表：
├── iPhone 15 Pro (Connected) ✅
├── iPad Pro (Simulator)
└── ...

右侧设备信息：
- Device Information
- Installed Apps
- Device Logs
```

### 步骤 3: 配对设备

如果设备显示为：
- **"Unpaired"** → 点击 "Use for Development"
- **"Preparing..."** → 等待完成
- **"Trust"** → 点击 Trust 按钮

### 步骤 4: 在设备上确认

设备屏幕上会显示：
```
要信任此电脑吗？

此电脑将能够访问您设备上的照片、视频、联系人和其他内容。

[取消]  [信任]
```

点击 **"信任"** 并输入密码。

## 🔧 常见问题解决

### 问题 1: 设备不显示在列表中

**解决方案**：
```bash
# 1. 检查 USB 连接
# 重新插拔 USB 线

# 2. 检查设备是否解锁
# 解锁设备屏幕

# 3. 重启 Xcode
# 完全退出 Xcode (⌘Q)，重新打开

# 4. 检查 USB 端口
# 尝试不同的 USB 端口
```

### 问题 2: "Preparing device..." 一直显示

**解决方案**：
1. 断开设备连接
2. 重启设备（长按电源键）
3. 重新连接设备
4. 等待 Xcode 重新识别

### 问题 3: 设备显示但无法配对

**解决方案**：
1. 在设备上：设置 → 通用 → 传输或还原 iPhone → 还原 → 还原位置与隐私
2. 重新连接设备
3. 重新配对

### 问题 4: "Trust" 按钮不可点击

**解决方案**：
1. 确保设备已解锁
2. 在设备上手动信任：设置 → 通用 → VPN与设备管理
3. 找到你的 Mac，点击"信任"

### 问题 5: 需要开发者模式（iOS 16+）

**解决方案**：
1. 设备：设置 → 隐私与安全性 → 开发者模式
2. 开启"开发者模式"
3. 重启设备
4. 重新配对

## ⚡ 快速修复命令

```bash
# 1. 检查连接的设备
system_profiler SPUSBDataType | grep -i iphone

# 2. 重启 usbmuxd（设备连接服务）
sudo killall usbmuxd

# 3. 重新打开 Xcode
open -a Xcode
```

## 📱 设备要求检查清单

在配对前，确保：

- [ ] 设备已通过 USB 连接到 Mac
- [ ] 设备已解锁
- [ ] 设备上已点击"信任此电脑"
- [ ] 设备系统版本 ≥ iOS 17.0（项目要求）
- [ ] 开发者模式已开启（iOS 16+）
- [ ] USB 数据线支持数据传输（不只是充电）

## 🎯 配对成功标志

配对成功后，在 Xcode Devices Window 中：

- ✅ 设备名称显示为绿色
- ✅ 状态显示为 "Connected"
- ✅ 可以看到设备信息（iOS 版本、容量等）
- ✅ 在 Xcode 顶部设备选择器中可以看到设备

## 💡 提示

1. **首次配对需要时间**
   - 可能需要 1-2 分钟
   - 耐心等待，不要中断

2. **无线调试**
   - 首次配对后，可以在同一 Wi-Fi 下无线调试
   - 在 Devices Window 中启用"Connect via network"

3. **多设备管理**
   - 可以在 Devices Window 中管理多个设备
   - 每个设备都需要单独配对

4. **证书信任**
   - 配对后，首次运行应用时还需要信任开发者证书
   - 设备：设置 → 通用 → VPN与设备管理 → 信任证书

## 🚀 配对后的下一步

配对成功后：

1. **在 Xcode 中选择设备**
   - 顶部工具栏 → 设备选择器
   - 选择你的设备（不是模拟器）

2. **运行项目**
   - 点击运行按钮（▶️）
   - 或按 `⌘R`

3. **首次运行**
   - 设备上会提示信任开发者证书
   - 按照提示操作即可

---

**现在按照上述步骤进行设备配对！** 🎉

如果遇到任何问题，告诉我具体的错误信息。

